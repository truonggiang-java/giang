<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AdminLTE 3 | Dashboard</title>


<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet"
	th:href="@{https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback}">
<!-- Font Awesome -->
<link rel="stylesheet"
	th:href="@{plugins/fontawesome-free/css/all.min.css}">
<!-- Ionicons -->
<link rel="stylesheet"
	th:href="@{https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css}">
<!-- Tempusdominus Bootstrap 4 -->
<link rel="stylesheet"
	th:href="@{/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css}">
<!-- iCheck -->
<link rel="stylesheet"
	th:href="@{/plugins/icheck-bootstrap/icheck-bootstrap.min.css}">
<!-- JQVMap -->
<link rel="stylesheet" th:href="@{/plugins/jqvmap/jqvmap.min.css}">
<!-- Theme style -->
<link rel="stylesheet" th:href="@{/dist/css/adminlte.min.css}">
<!-- overlayScrollbars -->
<link rel="stylesheet"
	th:href="@{/plugins/overlayScrollbars/css/OverlayScrollbars.min.css}">
<!-- Daterange picker -->
<link rel="stylesheet"
	href="/plugins/daterangepicker/daterangepicker.css">
<!-- summernote -->
<link rel="stylesheet"
	th:href="@{/plugins/summernote/summernote-bs4.min.css}">

</head>
<body class="sidebar-mini layout-fixed" style="height: auto;">
	<header th:replace="/admin/header.html"></header>
	<div th:replace="/admin/aside.html"></div>
	<div class="content-wrapper" style="min-height: 1690.6px;">
		<!-- Content Header (Page header) -->
		<section class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h1>Simple Tables</h1>
					</div>
					<div class="col-sm-6">
						<ol class="breadcrumb float-sm-right">
							<li class="breadcrumb-item"><a href="#">Home</a></li>
							<li class="breadcrumb-item active">Simple Tables</li>
						</ol>
					</div>
				</div>
			</div>
			<!-- /.container-fluid -->
		</section>
		<button class="btn btn-warning" id="addBrand">Thêm mới</button>
		<!-- Main content -->
		<section class="content">
			<div class="container-fluid">
				<!-- /.row -->
				<div class="row">
					<div class="col-12">
						<div class="card">
							<div class="card-header">
								<h3 class="card-title">Responsive Hover Table</h3>

								<div class="card-tools">
									<div class="input-group input-group-sm" style="width: 150px;">
										<input type="text" name="table_search"
											class="form-control float-right" placeholder="Search">

										<div class="input-group-append">
											<button type="submit" class="btn btn-default">
												<i class="fas fa-search"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body table-responsive p-0">
								<table class="table table-hover text-nowrap">
									<thead>
										<tr>
											<th>ID</th>
											<th>Name</th>
											<th>Status</th>
											<th>Image</th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody id="category">


									</tbody>
								</table>
							</div>
							<!-- /.card-body -->
						</div>
						<!-- /.card -->
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
		</section>
		<!-- /.content -->
	</div>
	<div id="modal" class="modal fade bd-example-modal-lg" tabindex="-1"
		role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="card card-primary">
					<div class="card-header">
						<h3 class="card-title">Quick Example</h3>
					</div>
					<!-- /.card-header -->
					<!-- form start -->
					<form id="formModal">
						<div class="card-body">
							<div id="errors"></div>
							<div class="form-group">
								<input type="hidden" name="categoryId" value=""> <label
									for="name">Name</label> <input type="text" class="form-control"
									id="name" placeholder="Tên danh mục">

							</div>

							<div class="card-body">

								<div class="form-group">
									<label for="image">Ảnh đại diện</label>
									<div class="input-group">
										<div class="custom-file">
											<input type="file" class="custom-file-input" id="image">
											<label id="lblImage" class="custom-file-label" for="image">Choose
												file</label>
										</div>
									</div>
									<img alt="" src="" id="preview" width="120px">
								</div>
							</div>
							<div class="form-group">
								<label for="status">Trạng thái</label> <input type="checkbox"
									class="form-control" id="status" name="status">
							</div>
						</div>
						<!-- /.card-body -->
						<div class="card-footer">
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<footer th:replace="/admin/footer.html"></footer>
	<!-- jQuery -->
	<script src="/plugins/jquery/jquery.min.js"></script>
	<!-- jQuery UI 1.11.4 -->
	<script src="/plugins/jquery-ui/jquery-ui.min.js"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
	<script>
		$.widget.bridge('uibutton', $.ui.button)
	</script>
	<!-- Bootstrap 4 -->
	<script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- ChartJS -->
	<script src="/plugins/chart.js/Chart.min.js"></script>
	<!-- Sparkline -->
	<script src="/plugins/sparklines/sparkline.js"></script>
	<!-- JQVMap -->
	<script src="/plugins/jqvmap/jquery.vmap.min.js"></script>
	<script src="/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
	<!-- jQuery Knob Chart -->
	<script src="plugins/jquery-knob/jquery.knob.min.js"></script>
	<!-- daterangepicker -->
	<script src="/plugins/moment/moment.min.js"></script>
	<script src="/plugins/daterangepicker/daterangepicker.js"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script
		src="/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
	<!-- Summernote -->
	<script src="/plugins/summernote/summernote-bs4.min.js"></script>
	<!-- overlayScrollbars -->
	<script
		src="/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
	<!-- AdminLTE App -->
	<script src="/dist/js/adminlte.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="/dist/js/demo.js"></script>
	<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
	<script src="/dist/js/pages/dashboard.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<script type="text/javascript">
		function readURL(input) {
			if (input.files && input.files[0]) {
				let reader = new FileReader();
				reader.onload = function(e) {
					$('#preview').attr('src', e.target.result);
				}
				reader.readAsDataURL(input.files[0]);
			}
		}

		$(document).ready(function() {
			let data = new FormData(); //formData la mot thu vien trong js
			$("#image").change(function() {
				$("#lblImage").text(this.files[0].name)
				data.append("#image", this.files[0]);
				readURL(this);
			});
			$('#addBrand').click(function(e) {
				console.log(e);
				e.preventDefault();
				$("#name").val("");
				$("#status").prop("checked", true);
				$("image").val("")
				$('#modal').modal('show');
			})
			$("#formModal").submit(function(e) {
				e.preventDefault();
				data.append("name", $("#name").val());
				data.append("status", $("#status").prop("checked"));
				data.append("image", $("#image").val());
				data.append("slug", changeToSlug($("#name").val()));
				$.ajax({
					method : "POST",
					url : "http://localhost:8080/api/v1/brands",
					data : data,
					success : function(response) {
						console.log(response);
					},
					error : function(errors) {
						console.log(errors);
					}
				})
			})
		})
	</script>